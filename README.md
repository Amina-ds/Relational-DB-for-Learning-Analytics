# Relational-DB-for-Learning-Analytics

Проектирование и реализация PostgreSQL базы данных для сбора и анализа данных об эмоциях в образовании.

ER-диаграмма базы данных
<img src="images/er.pgerd.png" alt="ER-диаграмма базы данных" width="400">
Структура базы данных включает 6 таблиц:
students - информация о студентах
courses - учебные курсы
classes - конкретные занятия по курсам
enrollments - записи студентов на курсы (связь многие-ко-многим)
emotion_events - эмоциональные события на занятиях
emotions_dictionary - справочник эмоций


## 2. Описание нормализации

Наша база данных сделана по правилам Третьей нормальной формы (3НФ). Это нужно, чтобы в данных был порядок и не было лишних повторений.

* **Правило 1 (1НФ)**: В одной ячейке хранится только одно значение. Например, у студента не может быть двух имён в одном поле `full_name`.

* **Правило 2 (2НФ)**: Все данные в строке зависят от всего ключа, а не от его части. Например, в таблице `enrollments` дата записи (`enroll_date`) зависит от связки студент + курс, а не просто от студента или просто от курса.

* **Правило 3 (3НФ)**: Нет полей, которые зависят от других полей, не являющихся ключом. Например, имя преподавателя (`instructor`) в таблице `courses` зависит только от ID курса (`course_id`), а не от названия курса.

## 3. Обоснование индексов
[cite_start]Для ускорения "тяжёлых" запросов к таблице `emotion_events` был создан 
* [cite_start]**Индекс по полю `ts` (timestamp)**. Потому-что запросы фильтруют данные по дате или временному диапазону, этот индекс позволяет базе данных быстро находить нужные записи, не сканируя всю таблицу. (B-Tree по умолчанию)

#### Это полное сканирование — база данных "пролистала" всю таблицу от начала до конца, чтобы найти нужные строки.
Seq Scan on emotion_events
<img src="images/before_1.png" alt="После индексирование" width="400">

#### На втором скриншоте план выполнения 
-> Bitmap Index Scan on idx_emotion_events_ts
<img src="images/after_1.png" alt="После индексирование" width="400">

Execution Time: 0.501 мс (без индекса) против 0.084 мс (с индексом). 

